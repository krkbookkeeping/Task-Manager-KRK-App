import{r as It,_ as ne,C as ie,a as re,E as Ji,o as hr,F as un,g as Pe,b as Wi,d as Xi,L as Yi,i as ar,c as lr,v as ur,e as Ai,f as cr,h as fr,j as pr,p as gr,u as dr,k as mr,l as cn,m as yr,S as wr,n as _r,q as vr}from"./index.esm-BIp51PkM.js";var Tr="firebase",Ir="12.9.0";It(Tr,Ir,"app");const Qi="@firebase/installations",fn="0.6.19";const Zi=1e4,ts=`w:${fn}`,es="FIS_v2",Ar="https://firebaseinstallations.googleapis.com/v1",Er=3600*1e3,Sr="installations",Pr="Installations";const Rr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},At=new Ji(Sr,Pr,Rr);function ns(s){return s instanceof un&&s.code.includes("request-failed")}function is({projectId:s}){return`${Ar}/projects/${s}/installations`}function ss(s){return{token:s.token,requestStatus:2,expiresIn:kr(s.expiresIn),creationTime:Date.now()}}async function rs(s,e){const h=(await e.json()).error;return At.create("request-failed",{requestName:s,serverCode:h.code,serverMessage:h.message,serverStatus:h.status})}function os({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function br(s,{refreshToken:e}){const r=os(s);return r.append("Authorization",Cr(e)),r}async function hs(s){const e=await s();return e.status>=500&&e.status<600?s():e}function kr(s){return Number(s.replace("s","000"))}function Cr(s){return`${es} ${s}`}async function Dr({appConfig:s,heartbeatServiceProvider:e},{fid:r}){const h=is(s),c=os(s),d=e.getImmediate({optional:!0});if(d){const A=await d.getHeartbeatsHeader();A&&c.append("x-firebase-client",A)}const y={fid:r,authVersion:es,appId:s.appId,sdkVersion:ts},v={method:"POST",headers:c,body:JSON.stringify(y)},I=await hs(()=>fetch(h,v));if(I.ok){const A=await I.json();return{fid:A.fid||r,registrationStatus:2,refreshToken:A.refreshToken,authToken:ss(A.authToken)}}else throw await rs("Create Installation",I)}function as(s){return new Promise(e=>{setTimeout(e,s)})}function Nr(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const Or=/^[cdef][\w-]{21}$/,hn="";function Lr(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const r=jr(s);return Or.test(r)?r:hn}catch{return hn}}function jr(s){return Nr(s).substr(0,22)}function Re(s){return`${s.appName}!${s.appId}`}const ls=new Map;function us(s,e){const r=Re(s);cs(r,e),Mr(r,e)}function cs(s,e){const r=ls.get(s);if(r)for(const h of r)h(e)}function Mr(s,e){const r=xr();r&&r.postMessage({key:s,fid:e}),Vr()}let wt=null;function xr(){return!wt&&"BroadcastChannel"in self&&(wt=new BroadcastChannel("[Firebase] FID Change"),wt.onmessage=s=>{cs(s.data.key,s.data.fid)}),wt}function Vr(){ls.size===0&&wt&&(wt.close(),wt=null)}const Fr="firebase-installations-database",Ur=1,Et="firebase-installations-store";let en=null;function pn(){return en||(en=hr(Fr,Ur,{upgrade:(s,e)=>{e===0&&s.createObjectStore(Et)}})),en}async function Ae(s,e){const r=Re(s),c=(await pn()).transaction(Et,"readwrite"),d=c.objectStore(Et),y=await d.get(r);return await d.put(e,r),await c.done,(!y||y.fid!==e.fid)&&us(s,e.fid),e}async function fs(s){const e=Re(s),h=(await pn()).transaction(Et,"readwrite");await h.objectStore(Et).delete(e),await h.done}async function be(s,e){const r=Re(s),c=(await pn()).transaction(Et,"readwrite"),d=c.objectStore(Et),y=await d.get(r),v=e(y);return v===void 0?await d.delete(r):await d.put(v,r),await c.done,v&&(!y||y.fid!==v.fid)&&us(s,v.fid),v}async function gn(s){let e;const r=await be(s.appConfig,h=>{const c=qr(h),d=Br(s,c);return e=d.registrationPromise,d.installationEntry});return r.fid===hn?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function qr(s){const e=s||{fid:Lr(),registrationStatus:0};return ps(e)}function Br(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const c=Promise.reject(At.create("app-offline"));return{installationEntry:e,registrationPromise:c}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},h=$r(s,r);return{installationEntry:r,registrationPromise:h}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Gr(s)}:{installationEntry:e}}async function $r(s,e){try{const r=await Dr(s,e);return Ae(s.appConfig,r)}catch(r){throw ns(r)&&r.customData.serverCode===409?await fs(s.appConfig):await Ae(s.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function Gr(s){let e=await Ei(s.appConfig);for(;e.registrationStatus===1;)await as(100),e=await Ei(s.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:h}=await gn(s);return h||r}return e}function Ei(s){return be(s,e=>{if(!e)throw At.create("installation-not-found");return ps(e)})}function ps(s){return Hr(s)?{fid:s.fid,registrationStatus:0}:s}function Hr(s){return s.registrationStatus===1&&s.registrationTime+Zi<Date.now()}async function zr({appConfig:s,heartbeatServiceProvider:e},r){const h=Kr(s,r),c=br(s,r),d=e.getImmediate({optional:!0});if(d){const A=await d.getHeartbeatsHeader();A&&c.append("x-firebase-client",A)}const y={installation:{sdkVersion:ts,appId:s.appId}},v={method:"POST",headers:c,body:JSON.stringify(y)},I=await hs(()=>fetch(h,v));if(I.ok){const A=await I.json();return ss(A)}else throw await rs("Generate Auth Token",I)}function Kr(s,{fid:e}){return`${is(s)}/${e}/authTokens:generate`}async function dn(s,e=!1){let r;const h=await be(s.appConfig,d=>{if(!gs(d))throw At.create("not-registered");const y=d.authToken;if(!e&&Xr(y))return d;if(y.requestStatus===1)return r=Jr(s,e),d;{if(!navigator.onLine)throw At.create("app-offline");const v=Qr(d);return r=Wr(s,v),v}});return r?await r:h.authToken}async function Jr(s,e){let r=await Si(s.appConfig);for(;r.authToken.requestStatus===1;)await as(100),r=await Si(s.appConfig);const h=r.authToken;return h.requestStatus===0?dn(s,e):h}function Si(s){return be(s,e=>{if(!gs(e))throw At.create("not-registered");const r=e.authToken;return Zr(r)?{...e,authToken:{requestStatus:0}}:e})}async function Wr(s,e){try{const r=await zr(s,e),h={...e,authToken:r};return await Ae(s.appConfig,h),r}catch(r){if(ns(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await fs(s.appConfig);else{const h={...e,authToken:{requestStatus:0}};await Ae(s.appConfig,h)}throw r}}function gs(s){return s!==void 0&&s.registrationStatus===2}function Xr(s){return s.requestStatus===2&&!Yr(s)}function Yr(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+Er}function Qr(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function Zr(s){return s.requestStatus===1&&s.requestTime+Zi<Date.now()}async function to(s){const e=s,{installationEntry:r,registrationPromise:h}=await gn(e);return h?h.catch(console.error):dn(e).catch(console.error),r.fid}async function eo(s,e=!1){const r=s;return await no(r),(await dn(r,e)).token}async function no(s){const{registrationPromise:e}=await gn(s);e&&await e}function io(s){if(!s||!s.options)throw nn("App Configuration");if(!s.name)throw nn("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!s.options[r])throw nn(r);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function nn(s){return At.create("missing-app-config-values",{valueName:s})}const ds="installations",so="installations-internal",ro=s=>{const e=s.getProvider("app").getImmediate(),r=io(e),h=re(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:h,_delete:()=>Promise.resolve()}},oo=s=>{const e=s.getProvider("app").getImmediate(),r=re(e,ds).getImmediate();return{getId:()=>to(r),getToken:c=>eo(r,c)}};function ho(){ne(new ie(ds,ro,"PUBLIC")),ne(new ie(so,oo,"PRIVATE"))}ho();It(Qi,fn);It(Qi,fn,"esm2020");const Ee="analytics",ao="firebase_id",lo="origin",uo=60*1e3,co="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mn="https://www.googletagmanager.com/gtag/js";const q=new Yi("@firebase/analytics");const fo={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},H=new Ji("analytics","Analytics",fo);function po(s){if(!s.startsWith(mn)){const e=H.create("invalid-gtag-resource",{gtagURL:s});return q.warn(e.message),""}return s}function ms(s){return Promise.all(s.map(e=>e.catch(r=>r)))}function go(s,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(s,e)),r}function mo(s,e){const r=go("firebase-js-sdk-policy",{createScriptURL:po}),h=document.createElement("script"),c=`${mn}?l=${s}&id=${e}`;h.src=r?r?.createScriptURL(c):c,h.async=!0,document.head.appendChild(h)}function yo(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function wo(s,e,r,h,c,d){const y=h[c];try{if(y)await e[y];else{const I=(await ms(r)).find(A=>A.measurementId===c);I&&await e[I.appId]}}catch(v){q.error(v)}s("config",c,d)}async function _o(s,e,r,h,c){try{let d=[];if(c&&c.send_to){let y=c.send_to;Array.isArray(y)||(y=[y]);const v=await ms(r);for(const I of y){const A=v.find(b=>b.measurementId===I),C=A&&e[A.appId];if(C)d.push(C);else{d=[];break}}}d.length===0&&(d=Object.values(e)),await Promise.all(d),s("event",h,c||{})}catch(d){q.error(d)}}function vo(s,e,r,h){async function c(d,...y){try{if(d==="event"){const[v,I]=y;await _o(s,e,r,v,I)}else if(d==="config"){const[v,I]=y;await wo(s,e,r,h,v,I)}else if(d==="consent"){const[v,I]=y;s("consent",v,I)}else if(d==="get"){const[v,I,A]=y;s("get",v,I,A)}else if(d==="set"){const[v]=y;s("set",v)}else s(d,...y)}catch(v){q.error(v)}}return c}function To(s,e,r,h,c){let d=function(...y){window[h].push(arguments)};return window[c]&&typeof window[c]=="function"&&(d=window[c]),window[c]=vo(d,s,e,r),{gtagCore:d,wrappedGtag:window[c]}}function Io(s){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(mn)&&r.src.includes(s))return r;return null}const Ao=30,Eo=1e3;class So{constructor(e={},r=Eo){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ys=new So;function Po(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function Ro(s){const{appId:e,apiKey:r}=s,h={method:"GET",headers:Po(r)},c=co.replace("{app-id}",e),d=await fetch(c,h);if(d.status!==200&&d.status!==304){let y="";try{const v=await d.json();v.error?.message&&(y=v.error.message)}catch{}throw H.create("config-fetch-failed",{httpStatus:d.status,responseMessage:y})}return d.json()}async function bo(s,e=ys,r){const{appId:h,apiKey:c,measurementId:d}=s.options;if(!h)throw H.create("no-app-id");if(!c){if(d)return{measurementId:d,appId:h};throw H.create("no-api-key")}const y=e.getThrottleMetadata(h)||{backoffCount:0,throttleEndTimeMillis:Date.now()},v=new Do;return setTimeout(async()=>{v.abort()},uo),ws({appId:h,apiKey:c,measurementId:d},y,v,e)}async function ws(s,{throttleEndTimeMillis:e,backoffCount:r},h,c=ys){const{appId:d,measurementId:y}=s;try{await ko(h,e)}catch(v){if(y)return q.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${y} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:d,measurementId:y};throw v}try{const v=await Ro(s);return c.deleteThrottleMetadata(d),v}catch(v){const I=v;if(!Co(I)){if(c.deleteThrottleMetadata(d),y)return q.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${y} provided in the "measurementId" field in the local Firebase config. [${I?.message}]`),{appId:d,measurementId:y};throw v}const A=Number(I?.customData?.httpStatus)===503?Ai(r,c.intervalMillis,Ao):Ai(r,c.intervalMillis),C={throttleEndTimeMillis:Date.now()+A,backoffCount:r+1};return c.setThrottleMetadata(d,C),q.debug(`Calling attemptFetch again in ${A} millis`),ws(s,C,h,c)}}function ko(s,e){return new Promise((r,h)=>{const c=Math.max(e-Date.now(),0),d=setTimeout(r,c);s.addEventListener(()=>{clearTimeout(d),h(H.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Co(s){if(!(s instanceof un)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class Do{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function No(s,e,r,h,c){if(c&&c.global){s("event",r,h);return}else{const d=await e,y={...h,send_to:d};s("event",r,y)}}async function Oo(s,e,r,h){if(h&&h.global){const c={};for(const d of Object.keys(r))c[`user_properties.${d}`]=r[d];return s("set",c),Promise.resolve()}else{const c=await e;s("config",c,{update:!0,user_properties:r})}}async function Lo(){if(lr())try{await ur()}catch(s){return q.warn(H.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return q.warn(H.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jo(s,e,r,h,c,d,y){const v=bo(s);v.then(B=>{r[B.measurementId]=B.appId,s.options.measurementId&&B.measurementId!==s.options.measurementId&&q.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${B.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(B=>q.error(B)),e.push(v);const I=Lo().then(B=>{if(B)return h.getId()}),[A,C]=await Promise.all([v,I]);Io(d)||mo(d,A.measurementId),c("js",new Date);const b=y?.config??{};return b[lo]="firebase",b.update=!0,C!=null&&(b[ao]=C),c("config",A.measurementId,b),A.measurementId}class Mo{constructor(e){this.app=e}_delete(){return delete Lt[this.app.options.appId],Promise.resolve()}}let Lt={},Pi=[];const Ri={};let sn="dataLayer",xo="gtag",bi,yn,ki=!1;function Vo(){const s=[];if(ar()&&s.push("This is a browser extension environment."),cr()||s.push("Cookies are not available."),s.length>0){const e=s.map((h,c)=>`(${c+1}) ${h}`).join(" "),r=H.create("invalid-analytics-context",{errorInfo:e});q.warn(r.message)}}function Fo(s,e,r){Vo();const h=s.options.appId;if(!h)throw H.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)q.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw H.create("no-api-key");if(Lt[h]!=null)throw H.create("already-exists",{id:h});if(!ki){yo(sn);const{wrappedGtag:d,gtagCore:y}=To(Lt,Pi,Ri,sn,xo);yn=d,bi=y,ki=!0}return Lt[h]=jo(s,Pi,Ri,e,bi,sn,r),new Mo(s)}function Uo(s=Wi()){s=Pe(s);const e=re(s,Ee);return e.isInitialized()?e.getImmediate():qo(s)}function qo(s,e={}){const r=re(s,Ee);if(r.isInitialized()){const c=r.getImmediate();if(Xi(e,r.getOptions()))return c;throw H.create("already-initialized")}return r.initialize({options:e})}function Bo(s,e,r){s=Pe(s),Oo(yn,Lt[s.app.options.appId],e,r).catch(h=>q.error(h))}function $o(s,e,r,h){s=Pe(s),No(yn,Lt[s.app.options.appId],e,r,h).catch(c=>q.error(c))}const Ci="@firebase/analytics",Di="0.10.19";function Go(){ne(new ie(Ee,(e,{options:r})=>{const h=e.getProvider("app").getImmediate(),c=e.getProvider("installations-internal").getImmediate();return Fo(h,c,r)},"PUBLIC")),ne(new ie("analytics-internal",s,"PRIVATE")),It(Ci,Di),It(Ci,Di,"esm2020");function s(e){try{const r=e.getProvider(Ee).getImmediate();return{logEvent:(h,c,d)=>$o(r,h,c,d),setUserProperties:(h,c)=>Bo(r,h,c)}}catch(r){throw H.create("interop-component-reg-failed",{reason:r})}}}Go();var Ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wn;(function(){var s;function e(p,a){function u(){}u.prototype=a.prototype,p.F=a.prototype,p.prototype=new u,p.prototype.constructor=p,p.D=function(g,f,w){for(var l=Array(arguments.length-2),G=2;G<arguments.length;G++)l[G-2]=arguments[G];return a.prototype[f].apply(g,l)}}function r(){this.blockSize=-1}function h(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(h,r),h.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(p,a,u){u||(u=0);const g=Array(16);if(typeof a=="string")for(var f=0;f<16;++f)g[f]=a.charCodeAt(u++)|a.charCodeAt(u++)<<8|a.charCodeAt(u++)<<16|a.charCodeAt(u++)<<24;else for(f=0;f<16;++f)g[f]=a[u++]|a[u++]<<8|a[u++]<<16|a[u++]<<24;a=p.g[0],u=p.g[1],f=p.g[2];let w=p.g[3],l;l=a+(w^u&(f^w))+g[0]+3614090360&4294967295,a=u+(l<<7&4294967295|l>>>25),l=w+(f^a&(u^f))+g[1]+3905402710&4294967295,w=a+(l<<12&4294967295|l>>>20),l=f+(u^w&(a^u))+g[2]+606105819&4294967295,f=w+(l<<17&4294967295|l>>>15),l=u+(a^f&(w^a))+g[3]+3250441966&4294967295,u=f+(l<<22&4294967295|l>>>10),l=a+(w^u&(f^w))+g[4]+4118548399&4294967295,a=u+(l<<7&4294967295|l>>>25),l=w+(f^a&(u^f))+g[5]+1200080426&4294967295,w=a+(l<<12&4294967295|l>>>20),l=f+(u^w&(a^u))+g[6]+2821735955&4294967295,f=w+(l<<17&4294967295|l>>>15),l=u+(a^f&(w^a))+g[7]+4249261313&4294967295,u=f+(l<<22&4294967295|l>>>10),l=a+(w^u&(f^w))+g[8]+1770035416&4294967295,a=u+(l<<7&4294967295|l>>>25),l=w+(f^a&(u^f))+g[9]+2336552879&4294967295,w=a+(l<<12&4294967295|l>>>20),l=f+(u^w&(a^u))+g[10]+4294925233&4294967295,f=w+(l<<17&4294967295|l>>>15),l=u+(a^f&(w^a))+g[11]+2304563134&4294967295,u=f+(l<<22&4294967295|l>>>10),l=a+(w^u&(f^w))+g[12]+1804603682&4294967295,a=u+(l<<7&4294967295|l>>>25),l=w+(f^a&(u^f))+g[13]+4254626195&4294967295,w=a+(l<<12&4294967295|l>>>20),l=f+(u^w&(a^u))+g[14]+2792965006&4294967295,f=w+(l<<17&4294967295|l>>>15),l=u+(a^f&(w^a))+g[15]+1236535329&4294967295,u=f+(l<<22&4294967295|l>>>10),l=a+(f^w&(u^f))+g[1]+4129170786&4294967295,a=u+(l<<5&4294967295|l>>>27),l=w+(u^f&(a^u))+g[6]+3225465664&4294967295,w=a+(l<<9&4294967295|l>>>23),l=f+(a^u&(w^a))+g[11]+643717713&4294967295,f=w+(l<<14&4294967295|l>>>18),l=u+(w^a&(f^w))+g[0]+3921069994&4294967295,u=f+(l<<20&4294967295|l>>>12),l=a+(f^w&(u^f))+g[5]+3593408605&4294967295,a=u+(l<<5&4294967295|l>>>27),l=w+(u^f&(a^u))+g[10]+38016083&4294967295,w=a+(l<<9&4294967295|l>>>23),l=f+(a^u&(w^a))+g[15]+3634488961&4294967295,f=w+(l<<14&4294967295|l>>>18),l=u+(w^a&(f^w))+g[4]+3889429448&4294967295,u=f+(l<<20&4294967295|l>>>12),l=a+(f^w&(u^f))+g[9]+568446438&4294967295,a=u+(l<<5&4294967295|l>>>27),l=w+(u^f&(a^u))+g[14]+3275163606&4294967295,w=a+(l<<9&4294967295|l>>>23),l=f+(a^u&(w^a))+g[3]+4107603335&4294967295,f=w+(l<<14&4294967295|l>>>18),l=u+(w^a&(f^w))+g[8]+1163531501&4294967295,u=f+(l<<20&4294967295|l>>>12),l=a+(f^w&(u^f))+g[13]+2850285829&4294967295,a=u+(l<<5&4294967295|l>>>27),l=w+(u^f&(a^u))+g[2]+4243563512&4294967295,w=a+(l<<9&4294967295|l>>>23),l=f+(a^u&(w^a))+g[7]+1735328473&4294967295,f=w+(l<<14&4294967295|l>>>18),l=u+(w^a&(f^w))+g[12]+2368359562&4294967295,u=f+(l<<20&4294967295|l>>>12),l=a+(u^f^w)+g[5]+4294588738&4294967295,a=u+(l<<4&4294967295|l>>>28),l=w+(a^u^f)+g[8]+2272392833&4294967295,w=a+(l<<11&4294967295|l>>>21),l=f+(w^a^u)+g[11]+1839030562&4294967295,f=w+(l<<16&4294967295|l>>>16),l=u+(f^w^a)+g[14]+4259657740&4294967295,u=f+(l<<23&4294967295|l>>>9),l=a+(u^f^w)+g[1]+2763975236&4294967295,a=u+(l<<4&4294967295|l>>>28),l=w+(a^u^f)+g[4]+1272893353&4294967295,w=a+(l<<11&4294967295|l>>>21),l=f+(w^a^u)+g[7]+4139469664&4294967295,f=w+(l<<16&4294967295|l>>>16),l=u+(f^w^a)+g[10]+3200236656&4294967295,u=f+(l<<23&4294967295|l>>>9),l=a+(u^f^w)+g[13]+681279174&4294967295,a=u+(l<<4&4294967295|l>>>28),l=w+(a^u^f)+g[0]+3936430074&4294967295,w=a+(l<<11&4294967295|l>>>21),l=f+(w^a^u)+g[3]+3572445317&4294967295,f=w+(l<<16&4294967295|l>>>16),l=u+(f^w^a)+g[6]+76029189&4294967295,u=f+(l<<23&4294967295|l>>>9),l=a+(u^f^w)+g[9]+3654602809&4294967295,a=u+(l<<4&4294967295|l>>>28),l=w+(a^u^f)+g[12]+3873151461&4294967295,w=a+(l<<11&4294967295|l>>>21),l=f+(w^a^u)+g[15]+530742520&4294967295,f=w+(l<<16&4294967295|l>>>16),l=u+(f^w^a)+g[2]+3299628645&4294967295,u=f+(l<<23&4294967295|l>>>9),l=a+(f^(u|~w))+g[0]+4096336452&4294967295,a=u+(l<<6&4294967295|l>>>26),l=w+(u^(a|~f))+g[7]+1126891415&4294967295,w=a+(l<<10&4294967295|l>>>22),l=f+(a^(w|~u))+g[14]+2878612391&4294967295,f=w+(l<<15&4294967295|l>>>17),l=u+(w^(f|~a))+g[5]+4237533241&4294967295,u=f+(l<<21&4294967295|l>>>11),l=a+(f^(u|~w))+g[12]+1700485571&4294967295,a=u+(l<<6&4294967295|l>>>26),l=w+(u^(a|~f))+g[3]+2399980690&4294967295,w=a+(l<<10&4294967295|l>>>22),l=f+(a^(w|~u))+g[10]+4293915773&4294967295,f=w+(l<<15&4294967295|l>>>17),l=u+(w^(f|~a))+g[1]+2240044497&4294967295,u=f+(l<<21&4294967295|l>>>11),l=a+(f^(u|~w))+g[8]+1873313359&4294967295,a=u+(l<<6&4294967295|l>>>26),l=w+(u^(a|~f))+g[15]+4264355552&4294967295,w=a+(l<<10&4294967295|l>>>22),l=f+(a^(w|~u))+g[6]+2734768916&4294967295,f=w+(l<<15&4294967295|l>>>17),l=u+(w^(f|~a))+g[13]+1309151649&4294967295,u=f+(l<<21&4294967295|l>>>11),l=a+(f^(u|~w))+g[4]+4149444226&4294967295,a=u+(l<<6&4294967295|l>>>26),l=w+(u^(a|~f))+g[11]+3174756917&4294967295,w=a+(l<<10&4294967295|l>>>22),l=f+(a^(w|~u))+g[2]+718787259&4294967295,f=w+(l<<15&4294967295|l>>>17),l=u+(w^(f|~a))+g[9]+3951481745&4294967295,p.g[0]=p.g[0]+a&4294967295,p.g[1]=p.g[1]+(f+(l<<21&4294967295|l>>>11))&4294967295,p.g[2]=p.g[2]+f&4294967295,p.g[3]=p.g[3]+w&4294967295}h.prototype.v=function(p,a){a===void 0&&(a=p.length);const u=a-this.blockSize,g=this.C;let f=this.h,w=0;for(;w<a;){if(f==0)for(;w<=u;)c(this,p,w),w+=this.blockSize;if(typeof p=="string"){for(;w<a;)if(g[f++]=p.charCodeAt(w++),f==this.blockSize){c(this,g),f=0;break}}else for(;w<a;)if(g[f++]=p[w++],f==this.blockSize){c(this,g),f=0;break}}this.h=f,this.o+=a},h.prototype.A=function(){var p=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);p[0]=128;for(var a=1;a<p.length-8;++a)p[a]=0;a=this.o*8;for(var u=p.length-8;u<p.length;++u)p[u]=a&255,a/=256;for(this.v(p),p=Array(16),a=0,u=0;u<4;++u)for(let g=0;g<32;g+=8)p[a++]=this.g[u]>>>g&255;return p};function d(p,a){var u=v;return Object.prototype.hasOwnProperty.call(u,p)?u[p]:u[p]=a(p)}function y(p,a){this.h=a;const u=[];let g=!0;for(let f=p.length-1;f>=0;f--){const w=p[f]|0;g&&w==a||(u[f]=w,g=!1)}this.g=u}var v={};function I(p){return-128<=p&&p<128?d(p,function(a){return new y([a|0],a<0?-1:0)}):new y([p|0],p<0?-1:0)}function A(p){if(isNaN(p)||!isFinite(p))return b;if(p<0)return L(A(-p));const a=[];let u=1;for(let g=0;p>=u;g++)a[g]=p/u|0,u*=4294967296;return new y(a,0)}function C(p,a){if(p.length==0)throw Error("number format error: empty string");if(a=a||10,a<2||36<a)throw Error("radix out of range: "+a);if(p.charAt(0)=="-")return L(C(p.substring(1),a));if(p.indexOf("-")>=0)throw Error('number format error: interior "-" character');const u=A(Math.pow(a,8));let g=b;for(let w=0;w<p.length;w+=8){var f=Math.min(8,p.length-w);const l=parseInt(p.substring(w,w+f),a);f<8?(f=A(Math.pow(a,f)),g=g.j(f).add(A(l))):(g=g.j(u),g=g.add(A(l)))}return g}var b=I(0),B=I(1),Pt=I(16777216);s=y.prototype,s.m=function(){if($(this))return-L(this).m();let p=0,a=1;for(let u=0;u<this.g.length;u++){const g=this.i(u);p+=(g>=0?g:4294967296+g)*a,a*=4294967296}return p},s.toString=function(p){if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(z(this))return"0";if($(this))return"-"+L(this).toString(p);const a=A(Math.pow(p,6));var u=this;let g="";for(;;){const f=kt(u,a).g;u=Rt(u,f.j(a));let w=((u.g.length>0?u.g[0]:u.h)>>>0).toString(p);if(u=f,z(u))return w+g;for(;w.length<6;)w="0"+w;g=w+g}},s.i=function(p){return p<0?0:p<this.g.length?this.g[p]:this.h};function z(p){if(p.h!=0)return!1;for(let a=0;a<p.g.length;a++)if(p.g[a]!=0)return!1;return!0}function $(p){return p.h==-1}s.l=function(p){return p=Rt(this,p),$(p)?-1:z(p)?0:1};function L(p){const a=p.g.length,u=[];for(let g=0;g<a;g++)u[g]=~p.g[g];return new y(u,~p.h).add(B)}s.abs=function(){return $(this)?L(this):this},s.add=function(p){const a=Math.max(this.g.length,p.g.length),u=[];let g=0;for(let f=0;f<=a;f++){let w=g+(this.i(f)&65535)+(p.i(f)&65535),l=(w>>>16)+(this.i(f)>>>16)+(p.i(f)>>>16);g=l>>>16,w&=65535,l&=65535,u[f]=l<<16|w}return new y(u,u[u.length-1]&-2147483648?-1:0)};function Rt(p,a){return p.add(L(a))}s.j=function(p){if(z(this)||z(p))return b;if($(this))return $(p)?L(this).j(L(p)):L(L(this).j(p));if($(p))return L(this.j(L(p)));if(this.l(Pt)<0&&p.l(Pt)<0)return A(this.m()*p.m());const a=this.g.length+p.g.length,u=[];for(var g=0;g<2*a;g++)u[g]=0;for(g=0;g<this.g.length;g++)for(let f=0;f<p.g.length;f++){const w=this.i(g)>>>16,l=this.i(g)&65535,G=p.i(f)>>>16,ft=p.i(f)&65535;u[2*g+2*f]+=l*ft,bt(u,2*g+2*f),u[2*g+2*f+1]+=w*ft,bt(u,2*g+2*f+1),u[2*g+2*f+1]+=l*G,bt(u,2*g+2*f+1),u[2*g+2*f+2]+=w*G,bt(u,2*g+2*f+2)}for(p=0;p<a;p++)u[p]=u[2*p+1]<<16|u[2*p];for(p=a;p<2*a;p++)u[p]=0;return new y(u,0)};function bt(p,a){for(;(p[a]&65535)!=p[a];)p[a+1]+=p[a]>>>16,p[a]&=65535,a++}function it(p,a){this.g=p,this.h=a}function kt(p,a){if(z(a))throw Error("division by zero");if(z(p))return new it(b,b);if($(p))return a=kt(L(p),a),new it(L(a.g),L(a.h));if($(a))return a=kt(p,L(a)),new it(L(a.g),a.h);if(p.g.length>30){if($(p)||$(a))throw Error("slowDivide_ only works with positive integers.");for(var u=B,g=a;g.l(p)<=0;)u=st(u),g=st(g);var f=K(u,1),w=K(g,1);for(g=K(g,2),u=K(u,2);!z(g);){var l=w.add(g);l.l(p)<=0&&(f=f.add(u),w=l),g=K(g,1),u=K(u,1)}return a=Rt(p,f.j(a)),new it(f,a)}for(f=b;p.l(a)>=0;){for(u=Math.max(1,Math.floor(p.m()/a.m())),g=Math.ceil(Math.log(u)/Math.LN2),g=g<=48?1:Math.pow(2,g-48),w=A(u),l=w.j(a);$(l)||l.l(p)>0;)u-=g,w=A(u),l=w.j(a);z(w)&&(w=B),f=f.add(w),p=Rt(p,l)}return new it(f,p)}s.B=function(p){return kt(this,p).h},s.and=function(p){const a=Math.max(this.g.length,p.g.length),u=[];for(let g=0;g<a;g++)u[g]=this.i(g)&p.i(g);return new y(u,this.h&p.h)},s.or=function(p){const a=Math.max(this.g.length,p.g.length),u=[];for(let g=0;g<a;g++)u[g]=this.i(g)|p.i(g);return new y(u,this.h|p.h)},s.xor=function(p){const a=Math.max(this.g.length,p.g.length),u=[];for(let g=0;g<a;g++)u[g]=this.i(g)^p.i(g);return new y(u,this.h^p.h)};function st(p){const a=p.g.length+1,u=[];for(let g=0;g<a;g++)u[g]=p.i(g)<<1|p.i(g-1)>>>31;return new y(u,p.h)}function K(p,a){const u=a>>5;a%=32;const g=p.g.length-u,f=[];for(let w=0;w<g;w++)f[w]=a>0?p.i(w+u)>>>a|p.i(w+u+1)<<32-a:p.i(w+u);return new y(f,p.h)}h.prototype.digest=h.prototype.A,h.prototype.reset=h.prototype.u,h.prototype.update=h.prototype.v,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.B,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=A,y.fromString=C,wn=y}).apply(typeof Ni<"u"?Ni:typeof self<"u"?self:typeof window<"u"?window:{});var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var s,e=Object.defineProperty;function r(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof ve=="object"&&ve];for(var n=0;n<t.length;++n){var i=t[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}var h=r(this);function c(t,n){if(n)t:{var i=h;t=t.split(".");for(var o=0;o<t.length-1;o++){var m=t[o];if(!(m in i))break t;i=i[m]}t=t[t.length-1],o=i[t],n=n(o),n!=o&&n!=null&&e(i,t,{configurable:!0,writable:!0,value:n})}}c("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(t){return t||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(t){return t||function(n){var i=[],o;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.push([o,n[o]]);return i}});var d=d||{},y=this||self;function v(t){var n=typeof t;return n=="object"&&t!=null||n=="function"}function I(t,n,i){return t.call.apply(t.bind,arguments)}function A(t,n,i){return A=I,A.apply(null,arguments)}function C(t,n){var i=Array.prototype.slice.call(arguments,1);return function(){var o=i.slice();return o.push.apply(o,arguments),t.apply(this,o)}}function b(t,n){function i(){}i.prototype=n.prototype,t.Z=n.prototype,t.prototype=new i,t.prototype.constructor=t,t.Ob=function(o,m,_){for(var T=Array(arguments.length-2),E=2;E<arguments.length;E++)T[E-2]=arguments[E];return n.prototype[m].apply(o,T)}}var B=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function Pt(t){const n=t.length;if(n>0){const i=Array(n);for(let o=0;o<n;o++)i[o]=t[o];return i}return[]}function z(t,n){for(let o=1;o<arguments.length;o++){const m=arguments[o];var i=typeof m;if(i=i!="object"?i:m?Array.isArray(m)?"array":i:"null",i=="array"||i=="object"&&typeof m.length=="number"){i=t.length||0;const _=m.length||0;t.length=i+_;for(let T=0;T<_;T++)t[i+T]=m[T]}else t.push(m)}}class ${constructor(n,i){this.i=n,this.j=i,this.h=0,this.g=null}get(){let n;return this.h>0?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}function L(t){y.setTimeout(()=>{throw t},0)}function Rt(){var t=p;let n=null;return t.g&&(n=t.g,t.g=t.g.next,t.g||(t.h=null),n.next=null),n}class bt{constructor(){this.h=this.g=null}add(n,i){const o=it.get();o.set(n,i),this.h?this.h.next=o:this.g=o,this.h=o}}var it=new $(()=>new kt,t=>t.reset());class kt{constructor(){this.next=this.g=this.h=null}set(n,i){this.h=n,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}let st,K=!1,p=new bt,a=()=>{const t=Promise.resolve(void 0);st=()=>{t.then(u)}};function u(){for(var t;t=Rt();){try{t.h.call(t.g)}catch(i){L(i)}var n=it;n.j(t),n.h<100&&(n.h++,t.next=n.g,n.g=t)}K=!1}function g(){this.u=this.u,this.C=this.C}g.prototype.u=!1,g.prototype.dispose=function(){this.u||(this.u=!0,this.N())},g.prototype[Symbol.dispose]=function(){this.dispose()},g.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function f(t,n){this.type=t,this.g=this.target=n,this.defaultPrevented=!1}f.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const i=()=>{};y.addEventListener("test",i,n),y.removeEventListener("test",i,n)}catch{}return t})();function l(t){return/^[\s\xa0]*$/.test(t)}function G(t,n){f.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t&&this.init(t,n)}b(G,f),G.prototype.init=function(t,n){const i=this.type=t.type,o=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=n,n=t.relatedTarget,n||(i=="mouseover"?n=t.fromElement:i=="mouseout"&&(n=t.toElement)),this.relatedTarget=n,o?(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=t.pointerType,this.state=t.state,this.i=t,t.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),Rs=0;function bs(t,n,i,o,m){this.listener=t,this.proxy=null,this.src=n,this.type=i,this.capture=!!o,this.ha=m,this.key=++Rs,this.da=this.fa=!1}function ae(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function le(t,n,i){for(const o in t)n.call(i,t[o],o,t)}function ks(t,n){for(const i in t)n.call(void 0,t[i],i,t)}function En(t){const n={};for(const i in t)n[i]=t[i];return n}const Sn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pn(t,n){let i,o;for(let m=1;m<arguments.length;m++){o=arguments[m];for(i in o)t[i]=o[i];for(let _=0;_<Sn.length;_++)i=Sn[_],Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}}function ue(t){this.src=t,this.g={},this.h=0}ue.prototype.add=function(t,n,i,o,m){const _=t.toString();t=this.g[_],t||(t=this.g[_]=[],this.h++);const T=Ce(t,n,o,m);return T>-1?(n=t[T],i||(n.fa=!1)):(n=new bs(n,this.src,_,!!o,m),n.fa=i,t.push(n)),n};function ke(t,n){const i=n.type;if(i in t.g){var o=t.g[i],m=Array.prototype.indexOf.call(o,n,void 0),_;(_=m>=0)&&Array.prototype.splice.call(o,m,1),_&&(ae(n),t.g[i].length==0&&(delete t.g[i],t.h--))}}function Ce(t,n,i,o){for(let m=0;m<t.length;++m){const _=t[m];if(!_.da&&_.listener==n&&_.capture==!!i&&_.ha==o)return m}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Ne={};function Rn(t,n,i,o,m){if(Array.isArray(n)){for(let _=0;_<n.length;_++)Rn(t,n[_],i,o,m);return null}return i=Cn(i),t&&t[ft]?t.J(n,i,v(o)?!!o.capture:!1,m):Cs(t,n,i,!1,o,m)}function Cs(t,n,i,o,m,_){if(!n)throw Error("Invalid event type");const T=v(m)?!!m.capture:!!m;let E=Le(t);if(E||(t[De]=E=new ue(t)),i=E.add(n,i,o,T,_),i.proxy)return i;if(o=Ds(),i.proxy=o,o.src=t,o.listener=i,t.addEventListener)w||(m=T),m===void 0&&(m=!1),t.addEventListener(n.toString(),o,m);else if(t.attachEvent)t.attachEvent(kn(n.toString()),o);else if(t.addListener&&t.removeListener)t.addListener(o);else throw Error("addEventListener and attachEvent are unavailable.");return i}function Ds(){function t(i){return n.call(t.src,t.listener,i)}const n=Ns;return t}function bn(t,n,i,o,m){if(Array.isArray(n))for(var _=0;_<n.length;_++)bn(t,n[_],i,o,m);else o=v(o)?!!o.capture:!!o,i=Cn(i),t&&t[ft]?(t=t.i,_=String(n).toString(),_ in t.g&&(n=t.g[_],i=Ce(n,i,o,m),i>-1&&(ae(n[i]),Array.prototype.splice.call(n,i,1),n.length==0&&(delete t.g[_],t.h--)))):t&&(t=Le(t))&&(n=t.g[n.toString()],t=-1,n&&(t=Ce(n,i,o,m)),(i=t>-1?n[t]:null)&&Oe(i))}function Oe(t){if(typeof t!="number"&&t&&!t.da){var n=t.src;if(n&&n[ft])ke(n.i,t);else{var i=t.type,o=t.proxy;n.removeEventListener?n.removeEventListener(i,o,t.capture):n.detachEvent?n.detachEvent(kn(i),o):n.addListener&&n.removeListener&&n.removeListener(o),(i=Le(n))?(ke(i,t),i.h==0&&(i.src=null,n[De]=null)):ae(t)}}}function kn(t){return t in Ne?Ne[t]:Ne[t]="on"+t}function Ns(t,n){if(t.da)t=!0;else{n=new G(n,this);const i=t.listener,o=t.ha||t.src;t.fa&&Oe(t),t=i.call(o,n)}return t}function Le(t){return t=t[De],t instanceof ue?t:null}var je="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cn(t){return typeof t=="function"?t:(t[je]||(t[je]=function(n){return t.handleEvent(n)}),t[je])}function x(){g.call(this),this.i=new ue(this),this.M=this,this.G=null}b(x,g),x.prototype[ft]=!0,x.prototype.removeEventListener=function(t,n,i,o){bn(this,t,n,i,o)};function V(t,n){var i,o=t.G;if(o)for(i=[];o;o=o.G)i.push(o);if(t=t.M,o=n.type||n,typeof n=="string")n=new f(n,t);else if(n instanceof f)n.target=n.target||t;else{var m=n;n=new f(o,t),Pn(n,m)}m=!0;let _,T;if(i)for(T=i.length-1;T>=0;T--)_=n.g=i[T],m=ce(_,o,!0,n)&&m;if(_=n.g=t,m=ce(_,o,!0,n)&&m,m=ce(_,o,!1,n)&&m,i)for(T=0;T<i.length;T++)_=n.g=i[T],m=ce(_,o,!1,n)&&m}x.prototype.N=function(){if(x.Z.N.call(this),this.i){var t=this.i;for(const n in t.g){const i=t.g[n];for(let o=0;o<i.length;o++)ae(i[o]);delete t.g[n],t.h--}}this.G=null},x.prototype.J=function(t,n,i,o){return this.i.add(String(t),n,!1,i,o)},x.prototype.K=function(t,n,i,o){return this.i.add(String(t),n,!0,i,o)};function ce(t,n,i,o){if(n=t.i.g[String(n)],!n)return!0;n=n.concat();let m=!0;for(let _=0;_<n.length;++_){const T=n[_];if(T&&!T.da&&T.capture==i){const E=T.listener,j=T.ha||T.src;T.fa&&ke(t.i,T),m=E.call(j,o)!==!1&&m}}return m&&!o.defaultPrevented}function Os(t,n){if(typeof t!="function")if(t&&typeof t.handleEvent=="function")t=A(t.handleEvent,t);else throw Error("Invalid listener argument");return Number(n)>2147483647?-1:y.setTimeout(t,n||0)}function Dn(t){t.g=Os(()=>{t.g=null,t.i&&(t.i=!1,Dn(t))},t.l);const n=t.h;t.h=null,t.m.apply(null,n)}class Ls extends g{constructor(n,i){super(),this.m=n,this.l=i,this.h=null,this.i=!1,this.g=null}j(n){this.h=arguments,this.g?this.i=!0:Dn(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xt(t){g.call(this),this.h=t,this.g={}}b(xt,g);var Nn=[];function On(t){le(t.g,function(n,i){this.g.hasOwnProperty(i)&&Oe(n)},t),t.g={}}xt.prototype.N=function(){xt.Z.N.call(this),On(this)},xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=y.JSON.stringify,js=y.JSON.parse,Ms=class{stringify(t){return y.JSON.stringify(t,void 0)}parse(t){return y.JSON.parse(t,void 0)}};function Ln(){}function xs(){}var Vt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xe(){f.call(this,"d")}b(xe,f);function Ve(){f.call(this,"c")}b(Ve,f);var Ct={},jn=null;function Fe(){return jn=jn||new x}Ct.Ia="serverreachability";function Mn(t){f.call(this,Ct.Ia,t)}b(Mn,f);function Ft(t){const n=Fe();V(n,new Mn(n))}Ct.STAT_EVENT="statevent";function xn(t,n){f.call(this,Ct.STAT_EVENT,t),this.stat=n}b(xn,f);function F(t){const n=Fe();V(n,new xn(n,t))}Ct.Ja="timingevent";function Vn(t,n){f.call(this,Ct.Ja,t),this.size=n}b(Vn,f);function Ut(t,n){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){t()},n)}function qt(){this.g=!0}qt.prototype.ua=function(){this.g=!1};function Vs(t,n,i,o,m,_){t.info(function(){if(t.g)if(_){var T="",E=_.split("&");for(let k=0;k<E.length;k++){var j=E[k].split("=");if(j.length>1){const M=j[0];j=j[1];const Q=M.split("_");T=Q.length>=2&&Q[1]=="type"?T+(M+"="+j+"&"):T+(M+"=redacted&")}}}else T=null;else T=_;return"XMLHTTP REQ ("+o+") [attempt "+m+"]: "+n+`
`+i+`
`+T})}function Fs(t,n,i,o,m,_,T){t.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+m+"]: "+n+`
`+i+`
`+_+" "+T})}function Dt(t,n,i,o){t.info(function(){return"XMLHTTP TEXT ("+n+"): "+qs(t,i)+(o?" "+o:"")})}function Us(t,n){t.info(function(){return"TIMEOUT: "+n})}qt.prototype.info=function(){};function qs(t,n){if(!t.g)return n;if(!n)return null;try{const _=JSON.parse(n);if(_){for(t=0;t<_.length;t++)if(Array.isArray(_[t])){var i=_[t];if(!(i.length<2)){var o=i[1];if(Array.isArray(o)&&!(o.length<1)){var m=o[0];if(m!="noop"&&m!="stop"&&m!="close")for(let T=1;T<o.length;T++)o[T]=""}}}}return Me(_)}catch{return n}}var Ue={NO_ERROR:0,TIMEOUT:8},Bs={},Fn;function qe(){}b(qe,Ln),qe.prototype.g=function(){return new XMLHttpRequest},Fn=new qe;function Bt(t){return encodeURIComponent(String(t))}function $s(t){var n=1;t=t.split(":");const i=[];for(;n>0&&t.length;)i.push(t.shift()),n--;return t.length&&i.push(t.join(":")),i}function rt(t,n,i,o){this.j=t,this.i=n,this.l=i,this.S=o||1,this.V=new xt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var qn={},Be={};function $e(t,n,i){t.M=1,t.A=pe(Y(n)),t.u=i,t.R=!0,Bn(t,null)}function Bn(t,n){t.F=Date.now(),fe(t),t.B=Y(t.A);var i=t.B,o=t.S;Array.isArray(o)||(o=[String(o)]),ei(i.i,"t",o),t.C=0,i=t.j.L,t.h=new Un,t.g=_i(t.j,i?n:null,!t.u),t.P>0&&(t.O=new Ls(A(t.Y,t,t.g),t.P)),n=t.V,i=t.g,o=t.ba;var m="readystatechange";Array.isArray(m)||(m&&(Nn[0]=m.toString()),m=Nn);for(let _=0;_<m.length;_++){const T=Rn(i,m[_],o||n.handleEvent,!1,n.h||n);if(!T)break;n.g[T.key]=T}n=t.J?En(t.J):{},t.u?(t.v||(t.v="POST"),n["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.B,t.v,t.u,n)):(t.v="GET",t.g.ea(t.B,t.v,null,n)),Ft(),Vs(t.i,t.v,t.B,t.l,t.S,t.u)}rt.prototype.ba=function(t){t=t.target;const n=this.O;n&&at(t)==3?n.j():this.Y(t)},rt.prototype.Y=function(t){try{if(t==this.g)t:{const E=at(this.g),j=this.g.ya(),k=this.g.ca();if(!(E<3)&&(E!=3||this.g&&(this.h.h||this.g.la()||ai(this.g)))){this.K||E!=4||j==7||(j==8||k<=0?Ft(3):Ft(2)),Ge(this);var n=this.g.ca();this.X=n;var i=Gs(this);if(this.o=n==200,Fs(this.i,this.v,this.B,this.l,this.S,E,n),this.o){if(this.U&&!this.L){e:{if(this.g){var o,m=this.g;if((o=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!l(o)){var _=o;break e}}_=null}if(t=_)Dt(this.i,this.l,t,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,t);else{this.o=!1,this.m=3,F(12),pt(this),$t(this);break t}}if(this.R){t=!0;let M;for(;!this.K&&this.C<i.length;)if(M=Hs(this,i),M==Be){E==4&&(this.m=4,F(14),t=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(M==qn){this.m=4,F(15),Dt(this.i,this.l,i,"[Invalid Chunk]"),t=!1;break}else Dt(this.i,this.l,M,null),He(this,M);if($n(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),E!=4||i.length!=0||this.h.h||(this.m=1,F(16),t=!1),this.o=this.o&&t,!t)Dt(this.i,this.l,i,"[Invalid Chunked Response]"),pt(this),$t(this);else if(i.length>0&&!this.W){this.W=!0;var T=this.j;T.g==this&&T.aa&&!T.P&&(T.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),Ze(T),T.P=!0,F(11))}}else Dt(this.i,this.l,i,null),He(this,i);E==4&&pt(this),this.o&&!this.K&&(E==4?di(this.j,this):(this.o=!1,fe(this)))}else rr(this.g),n==400&&i.indexOf("Unknown SID")>0?(this.m=3,F(12)):(this.m=0,F(13)),pt(this),$t(this)}}}catch{}};function Gs(t){if(!$n(t))return t.g.la();const n=ai(t.g);if(n==="")return"";let i="";const o=n.length,m=at(t.g)==4;if(!t.h.i){if(typeof TextDecoder>"u")return pt(t),$t(t),"";t.h.i=new y.TextDecoder}for(let _=0;_<o;_++)t.h.h=!0,i+=t.h.i.decode(n[_],{stream:!(m&&_==o-1)});return n.length=0,t.h.g+=i,t.C=0,t.h.g}function $n(t){return t.g?t.v=="GET"&&t.M!=2&&t.j.Aa:!1}function Hs(t,n){var i=t.C,o=n.indexOf(`
`,i);return o==-1?Be:(i=Number(n.substring(i,o)),isNaN(i)?qn:(o+=1,o+i>n.length?Be:(n=n.slice(o,o+i),t.C=o+i,n)))}rt.prototype.cancel=function(){this.K=!0,pt(this)};function fe(t){t.T=Date.now()+t.H,Gn(t,t.H)}function Gn(t,n){if(t.D!=null)throw Error("WatchDog timer not null");t.D=Ut(A(t.aa,t),n)}function Ge(t){t.D&&(y.clearTimeout(t.D),t.D=null)}rt.prototype.aa=function(){this.D=null;const t=Date.now();t-this.T>=0?(Us(this.i,this.B),this.M!=2&&(Ft(),F(17)),pt(this),this.m=2,$t(this)):Gn(this,this.T-t)};function $t(t){t.j.I==0||t.K||di(t.j,t)}function pt(t){Ge(t);var n=t.O;n&&typeof n.dispose=="function"&&n.dispose(),t.O=null,On(t.V),t.g&&(n=t.g,t.g=null,n.abort(),n.dispose())}function He(t,n){try{var i=t.j;if(i.I!=0&&(i.g==t||ze(i.h,t))){if(!t.L&&ze(i.h,t)&&i.I==3){try{var o=i.Ba.g.parse(n)}catch{o=null}if(Array.isArray(o)&&o.length==3){var m=o;if(m[0]==0){t:if(!i.v){if(i.g)if(i.g.F+3e3<t.F)we(i),me(i);else break t;Qe(i),F(18)}}else i.xa=m[1],0<i.xa-i.K&&m[2]<37500&&i.F&&i.A==0&&!i.C&&(i.C=Ut(A(i.Va,i),6e3));Kn(i.h)<=1&&i.ta&&(i.ta=void 0)}else dt(i,11)}else if((t.L||i.g==t)&&we(i),!l(n))for(m=i.Ba.g.parse(n),n=0;n<m.length;n++){let k=m[n];const M=k[0];if(!(M<=i.K))if(i.K=M,k=k[1],i.I==2)if(k[0]=="c"){i.M=k[1],i.ba=k[2];const Q=k[3];Q!=null&&(i.ka=Q,i.j.info("VER="+i.ka));const mt=k[4];mt!=null&&(i.za=mt,i.j.info("SVER="+i.za));const lt=k[5];lt!=null&&typeof lt=="number"&&lt>0&&(o=1.5*lt,i.O=o,i.j.info("backChannelRequestTimeoutMs_="+o)),o=i;const ut=t.g;if(ut){const _e=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_e){var _=o.h;_.g||_e.indexOf("spdy")==-1&&_e.indexOf("quic")==-1&&_e.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(Ke(_,_.h),_.h=null))}if(o.G){const tn=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;tn&&(o.wa=tn,D(o.J,o.G,tn))}}i.I=3,i.l&&i.l.ra(),i.aa&&(i.T=Date.now()-t.F,i.j.info("Handshake RTT: "+i.T+"ms")),o=i;var T=t;if(o.na=wi(o,o.L?o.ba:null,o.W),T.L){Jn(o.h,T);var E=T,j=o.O;j&&(E.H=j),E.D&&(Ge(E),fe(E)),o.g=T}else pi(o);i.i.length>0&&ye(i)}else k[0]!="stop"&&k[0]!="close"||dt(i,7);else i.I==3&&(k[0]=="stop"||k[0]=="close"?k[0]=="stop"?dt(i,7):Ye(i):k[0]!="noop"&&i.l&&i.l.qa(k),i.A=0)}}Ft(4)}catch{}}var zs=class{constructor(t,n){this.g=t,this.map=n}};function Hn(t){this.l=t||10,y.PerformanceNavigationTiming?(t=y.performance.getEntriesByType("navigation"),t=t.length>0&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zn(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Kn(t){return t.h?1:t.g?t.g.size:0}function ze(t,n){return t.h?t.h==n:t.g?t.g.has(n):!1}function Ke(t,n){t.g?t.g.add(n):t.h=n}function Jn(t,n){t.h&&t.h==n?t.h=null:t.g&&t.g.has(n)&&t.g.delete(n)}Hn.prototype.cancel=function(){if(this.i=Wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Wn(t){if(t.h!=null)return t.i.concat(t.h.G);if(t.g!=null&&t.g.size!==0){let n=t.i;for(const i of t.g.values())n=n.concat(i.G);return n}return Pt(t.i)}var Xn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(t,n){if(t){t=t.split("&");for(let i=0;i<t.length;i++){const o=t[i].indexOf("=");let m,_=null;o>=0?(m=t[i].substring(0,o),_=t[i].substring(o+1)):m=t[i],n(m,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}function ot(t){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let n;t instanceof ot?(this.l=t.l,Gt(this,t.j),this.o=t.o,this.g=t.g,Ht(this,t.u),this.h=t.h,Je(this,ni(t.i)),this.m=t.m):t&&(n=String(t).match(Xn))?(this.l=!1,Gt(this,n[1]||"",!0),this.o=zt(n[2]||""),this.g=zt(n[3]||"",!0),Ht(this,n[4]),this.h=zt(n[5]||"",!0),Je(this,n[6]||"",!0),this.m=zt(n[7]||"")):(this.l=!1,this.i=new Jt(null,this.l))}ot.prototype.toString=function(){const t=[];var n=this.j;n&&t.push(Kt(n,Yn,!0),":");var i=this.g;return(i||n=="file")&&(t.push("//"),(n=this.o)&&t.push(Kt(n,Yn,!0),"@"),t.push(Bt(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.u,i!=null&&t.push(":",String(i))),(i=this.h)&&(this.g&&i.charAt(0)!="/"&&t.push("/"),t.push(Kt(i,i.charAt(0)=="/"?Xs:Ws,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.m)&&t.push("#",Kt(i,Qs)),t.join("")},ot.prototype.resolve=function(t){const n=Y(this);let i=!!t.j;i?Gt(n,t.j):i=!!t.o,i?n.o=t.o:i=!!t.g,i?n.g=t.g:i=t.u!=null;var o=t.h;if(i)Ht(n,t.u);else if(i=!!t.h){if(o.charAt(0)!="/")if(this.g&&!this.h)o="/"+o;else{var m=n.h.lastIndexOf("/");m!=-1&&(o=n.h.slice(0,m+1)+o)}if(m=o,m==".."||m==".")o="";else if(m.indexOf("./")!=-1||m.indexOf("/.")!=-1){o=m.lastIndexOf("/",0)==0,m=m.split("/");const _=[];for(let T=0;T<m.length;){const E=m[T++];E=="."?o&&T==m.length&&_.push(""):E==".."?((_.length>1||_.length==1&&_[0]!="")&&_.pop(),o&&T==m.length&&_.push("")):(_.push(E),o=!0)}o=_.join("/")}else o=m}return i?n.h=o:i=t.i.toString()!=="",i?Je(n,ni(t.i)):i=!!t.m,i&&(n.m=t.m),n};function Y(t){return new ot(t)}function Gt(t,n,i){t.j=i?zt(n,!0):n,t.j&&(t.j=t.j.replace(/:$/,""))}function Ht(t,n){if(n){if(n=Number(n),isNaN(n)||n<0)throw Error("Bad port number "+n);t.u=n}else t.u=null}function Je(t,n,i){n instanceof Jt?(t.i=n,Zs(t.i,t.l)):(i||(n=Kt(n,Ys)),t.i=new Jt(n,t.l))}function D(t,n,i){t.i.set(n,i)}function pe(t){return D(t,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),t}function zt(t,n){return t?n?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kt(t,n,i){return typeof t=="string"?(t=encodeURI(t).replace(n,Js),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Js(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Yn=/[#\/\?@]/g,Ws=/[#\?:]/g,Xs=/[#\?]/g,Ys=/[#\?@]/g,Qs=/#/g;function Jt(t,n){this.h=this.g=null,this.i=t||null,this.j=!!n}function gt(t){t.g||(t.g=new Map,t.h=0,t.i&&Ks(t.i,function(n,i){t.add(decodeURIComponent(n.replace(/\+/g," ")),i)}))}s=Jt.prototype,s.add=function(t,n){gt(this),this.i=null,t=Nt(this,t);let i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(n),this.h+=1,this};function Qn(t,n){gt(t),n=Nt(t,n),t.g.has(n)&&(t.i=null,t.h-=t.g.get(n).length,t.g.delete(n))}function Zn(t,n){return gt(t),n=Nt(t,n),t.g.has(n)}s.forEach=function(t,n){gt(this),this.g.forEach(function(i,o){i.forEach(function(m){t.call(n,m,o,this)},this)},this)};function ti(t,n){gt(t);let i=[];if(typeof n=="string")Zn(t,n)&&(i=i.concat(t.g.get(Nt(t,n))));else for(t=Array.from(t.g.values()),n=0;n<t.length;n++)i=i.concat(t[n]);return i}s.set=function(t,n){return gt(this),this.i=null,t=Nt(this,t),Zn(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[n]),this.h+=1,this},s.get=function(t,n){return t?(t=ti(this,t),t.length>0?String(t[0]):n):n};function ei(t,n,i){Qn(t,n),i.length>0&&(t.i=null,t.g.set(Nt(t,n),Pt(i)),t.h+=i.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],n=Array.from(this.g.keys());for(let o=0;o<n.length;o++){var i=n[o];const m=Bt(i);i=ti(this,i);for(let _=0;_<i.length;_++){let T=m;i[_]!==""&&(T+="="+Bt(i[_])),t.push(T)}}return this.i=t.join("&")};function ni(t){const n=new Jt;return n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),n}function Nt(t,n){return n=String(n),t.j&&(n=n.toLowerCase()),n}function Zs(t,n){n&&!t.j&&(gt(t),t.i=null,t.g.forEach(function(i,o){const m=o.toLowerCase();o!=m&&(Qn(this,o),ei(this,m,i))},t)),t.j=n}function tr(t,n){const i=new qt;if(y.Image){const o=new Image;o.onload=C(ht,i,"TestLoadImage: loaded",!0,n,o),o.onerror=C(ht,i,"TestLoadImage: error",!1,n,o),o.onabort=C(ht,i,"TestLoadImage: abort",!1,n,o),o.ontimeout=C(ht,i,"TestLoadImage: timeout",!1,n,o),y.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=t}else n(!1)}function er(t,n){const i=new qt,o=new AbortController,m=setTimeout(()=>{o.abort(),ht(i,"TestPingServer: timeout",!1,n)},1e4);fetch(t,{signal:o.signal}).then(_=>{clearTimeout(m),_.ok?ht(i,"TestPingServer: ok",!0,n):ht(i,"TestPingServer: server error",!1,n)}).catch(()=>{clearTimeout(m),ht(i,"TestPingServer: error",!1,n)})}function ht(t,n,i,o,m){try{m&&(m.onload=null,m.onerror=null,m.onabort=null,m.ontimeout=null),o(i)}catch{}}function nr(){this.g=new Ms}function We(t){this.i=t.Sb||null,this.h=t.ab||!1}b(We,Ln),We.prototype.g=function(){return new ge(this.i,this.h)};function ge(t,n){x.call(this),this.H=t,this.o=n,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ge,x),s=ge.prototype,s.open=function(t,n){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=t,this.D=n,this.readyState=1,Xt(this)},s.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const n={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};t&&(n.body=t),(this.H||y).fetch(new Request(this.D,n)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wt(this)),this.readyState=0},s.Pa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xt(this)),this.g&&(this.readyState=3,Xt(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ii(this)}else t.text().then(this.Oa.bind(this),this.ga.bind(this))};function ii(t){t.j.read().then(t.Ma.bind(t)).catch(t.ga.bind(t))}s.Ma=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var n=t.value?t.value:new Uint8Array(0);(n=this.B.decode(n,{stream:!t.done}))&&(this.response=this.responseText+=n)}t.done?Wt(this):Xt(this),this.readyState==3&&ii(this)}},s.Oa=function(t){this.g&&(this.response=this.responseText=t,Wt(this))},s.Na=function(t){this.g&&(this.response=t,Wt(this))},s.ga=function(){this.g&&Wt(this)};function Wt(t){t.readyState=4,t.l=null,t.j=null,t.B=null,Xt(t)}s.setRequestHeader=function(t,n){this.A.append(t,n)},s.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],n=this.h.entries();for(var i=n.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=n.next();return t.join(`\r
`)};function Xt(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ge.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function si(t){let n="";return le(t,function(i,o){n+=o,n+=":",n+=i,n+=`\r
`}),n}function Xe(t,n,i){t:{for(o in i){var o=!1;break t}o=!0}o||(i=si(i),typeof t=="string"?i!=null&&Bt(i):D(t,n,i))}function N(t){x.call(this),this.headers=new Map,this.L=t||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(N,x);var ir=/^https?$/i,sr=["POST","PUT"];s=N.prototype,s.Fa=function(t){this.H=t},s.ea=function(t,n,i,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);n=n?n.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fn.g(),this.g.onreadystatechange=B(A(this.Ca,this));try{this.B=!0,this.g.open(n,String(t),!0),this.B=!1}catch(_){ri(this,_);return}if(t=i||"",i=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var m in o)i.set(m,o[m]);else if(typeof o.keys=="function"&&typeof o.get=="function")for(const _ of o.keys())i.set(_,o.get(_));else throw Error("Unknown input type for opt_headers: "+String(o));o=Array.from(i.keys()).find(_=>_.toLowerCase()=="content-type"),m=y.FormData&&t instanceof y.FormData,!(Array.prototype.indexOf.call(sr,n,void 0)>=0)||o||m||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,T]of i)this.g.setRequestHeader(_,T);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(_){ri(this,_)}};function ri(t,n){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=n,t.o=5,oi(t),de(t)}function oi(t){t.A||(t.A=!0,V(t,"complete"),V(t,"error"))}s.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=t||7,V(this,"complete"),V(this,"abort"),de(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),de(this,!0)),N.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?hi(this):this.Xa())},s.Xa=function(){hi(this)};function hi(t){if(t.h&&typeof d<"u"){if(t.v&&at(t)==4)setTimeout(t.Ca.bind(t),0);else if(V(t,"readystatechange"),at(t)==4){t.h=!1;try{const _=t.ca();t:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var i;if(!(i=n)){var o;if(o=_===0){let T=String(t.D).match(Xn)[1]||null;!T&&y.self&&y.self.location&&(T=y.self.location.protocol.slice(0,-1)),o=!ir.test(T?T.toLowerCase():"")}i=o}if(i)V(t,"complete"),V(t,"success");else{t.o=6;try{var m=at(t)>2?t.g.statusText:""}catch{m=""}t.l=m+" ["+t.ca()+"]",oi(t)}}finally{de(t)}}}}function de(t,n){if(t.g){t.m&&(clearTimeout(t.m),t.m=null);const i=t.g;t.g=null,n||V(t,"ready");try{i.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function at(t){return t.g?t.g.readyState:0}s.ca=function(){try{return at(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(t){if(this.g){var n=this.g.responseText;return t&&n.indexOf(t)==0&&(n=n.substring(t.length)),js(n)}};function ai(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.F){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function rr(t){const n={};t=(t.g&&at(t)>=2&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let o=0;o<t.length;o++){if(l(t[o]))continue;var i=$s(t[o]);const m=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();const _=n[m]||[];n[m]=_,_.push(i)}ks(n,function(o){return o.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yt(t,n,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||n}function li(t){this.za=0,this.i=[],this.j=new qt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yt("failFast",!1,t),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yt("baseRetryDelayMs",5e3,t),this.Za=Yt("retryDelaySeedMs",1e4,t),this.Ta=Yt("forwardChannelMaxRetries",2,t),this.va=Yt("forwardChannelRequestTimeoutMs",2e4,t),this.ma=t&&t.xmlHttpFactory||void 0,this.Ua=t&&t.Rb||void 0,this.Aa=t&&t.useFetchStreams||!1,this.O=void 0,this.L=t&&t.supportsCrossDomainXhr||!1,this.M="",this.h=new Hn(t&&t.concurrentRequestLimit),this.Ba=new nr,this.S=t&&t.fastHandshake||!1,this.R=t&&t.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=t&&t.Pb||!1,t&&t.ua&&this.j.ua(),t&&t.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&t&&t.detectBufferingProxy||!1,this.ia=void 0,t&&t.longPollingTimeout&&t.longPollingTimeout>0&&(this.ia=t.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=li.prototype,s.ka=8,s.I=1,s.connect=function(t,n,i,o){F(0),this.W=t,this.H=n||{},i&&o!==void 0&&(this.H.OSID=i,this.H.OAID=o),this.F=this.X,this.J=wi(this,null,this.W),ye(this)};function Ye(t){if(ui(t),t.I==3){var n=t.V++,i=Y(t.J);if(D(i,"SID",t.M),D(i,"RID",n),D(i,"TYPE","terminate"),Qt(t,i),n=new rt(t,t.j,n),n.M=2,n.A=pe(Y(i)),i=!1,y.navigator&&y.navigator.sendBeacon)try{i=y.navigator.sendBeacon(n.A.toString(),"")}catch{}!i&&y.Image&&(new Image().src=n.A,i=!0),i||(n.g=_i(n.j,null),n.g.ea(n.A)),n.F=Date.now(),fe(n)}yi(t)}function me(t){t.g&&(Ze(t),t.g.cancel(),t.g=null)}function ui(t){me(t),t.v&&(y.clearTimeout(t.v),t.v=null),we(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&y.clearTimeout(t.m),t.m=null)}function ye(t){if(!zn(t.h)&&!t.m){t.m=!0;var n=t.Ea;st||a(),K||(st(),K=!0),p.add(n,t),t.D=0}}function or(t,n){return Kn(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=n.G.concat(t.i),!0):t.I==1||t.I==2||t.D>=(t.Sa?0:t.Ta)?!1:(t.m=Ut(A(t.Ea,t,n),mi(t,t.D)),t.D++,!0)}s.Ea=function(t){if(this.m)if(this.m=null,this.I==1){if(!t){this.V=Math.floor(Math.random()*1e5),t=this.V++;const m=new rt(this,this.j,t);let _=this.o;if(this.U&&(_?(_=En(_),Pn(_,this.U)):_=this.U),this.u!==null||this.R||(m.J=_,_=null),this.S)t:{for(var n=0,i=0;i<this.i.length;i++){e:{var o=this.i[i];if("__data__"in o.map&&(o=o.map.__data__,typeof o=="string")){o=o.length;break e}o=void 0}if(o===void 0)break;if(n+=o,n>4096){n=i;break t}if(n===4096||i===this.i.length-1){n=i+1;break t}}n=1e3}else n=1e3;n=fi(this,m,n),i=Y(this.J),D(i,"RID",t),D(i,"CVER",22),this.G&&D(i,"X-HTTP-Session-Id",this.G),Qt(this,i),_&&(this.R?n="headers="+Bt(si(_))+"&"+n:this.u&&Xe(i,this.u,_)),Ke(this.h,m),this.Ra&&D(i,"TYPE","init"),this.S?(D(i,"$req",n),D(i,"SID","null"),m.U=!0,$e(m,i,null)):$e(m,i,n),this.I=2}}else this.I==3&&(t?ci(this,t):this.i.length==0||zn(this.h)||ci(this))};function ci(t,n){var i;n?i=n.l:i=t.V++;const o=Y(t.J);D(o,"SID",t.M),D(o,"RID",i),D(o,"AID",t.K),Qt(t,o),t.u&&t.o&&Xe(o,t.u,t.o),i=new rt(t,t.j,i,t.D+1),t.u===null&&(i.J=t.o),n&&(t.i=n.G.concat(t.i)),n=fi(t,i,1e3),i.H=Math.round(t.va*.5)+Math.round(t.va*.5*Math.random()),Ke(t.h,i),$e(i,o,n)}function Qt(t,n){t.H&&le(t.H,function(i,o){D(n,o,i)}),t.l&&le({},function(i,o){D(n,o,i)})}function fi(t,n,i){i=Math.min(t.i.length,i);const o=t.l?A(t.l.Ka,t.l,t):null;t:{var m=t.i;let E=-1;for(;;){const j=["count="+i];E==-1?i>0?(E=m[0].g,j.push("ofs="+E)):E=0:j.push("ofs="+E);let k=!0;for(let M=0;M<i;M++){var _=m[M].g;const Q=m[M].map;if(_-=E,_<0)E=Math.max(0,m[M].g-100),k=!1;else try{_="req"+_+"_"||"";try{var T=Q instanceof Map?Q:Object.entries(Q);for(const[mt,lt]of T){let ut=lt;v(lt)&&(ut=Me(lt)),j.push(_+mt+"="+encodeURIComponent(ut))}}catch(mt){throw j.push(_+"type="+encodeURIComponent("_badmap")),mt}}catch{o&&o(Q)}}if(k){T=j.join("&");break t}}T=void 0}return t=t.i.splice(0,i),n.G=t,T}function pi(t){if(!t.g&&!t.v){t.Y=1;var n=t.Da;st||a(),K||(st(),K=!0),p.add(n,t),t.A=0}}function Qe(t){return t.g||t.v||t.A>=3?!1:(t.Y++,t.v=Ut(A(t.Da,t),mi(t,t.A)),t.A++,!0)}s.Da=function(){if(this.v=null,gi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var t=4*this.T;this.j.info("BP detection timer enabled: "+t),this.B=Ut(A(this.Wa,this),t)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,F(10),me(this),gi(this))};function Ze(t){t.B!=null&&(y.clearTimeout(t.B),t.B=null)}function gi(t){t.g=new rt(t,t.j,"rpc",t.Y),t.u===null&&(t.g.J=t.o),t.g.P=0;var n=Y(t.na);D(n,"RID","rpc"),D(n,"SID",t.M),D(n,"AID",t.K),D(n,"CI",t.F?"0":"1"),!t.F&&t.ia&&D(n,"TO",t.ia),D(n,"TYPE","xmlhttp"),Qt(t,n),t.u&&t.o&&Xe(n,t.u,t.o),t.O&&(t.g.H=t.O);var i=t.g;t=t.ba,i.M=1,i.A=pe(Y(n)),i.u=null,i.R=!0,Bn(i,t)}s.Va=function(){this.C!=null&&(this.C=null,me(this),Qe(this),F(19))};function we(t){t.C!=null&&(y.clearTimeout(t.C),t.C=null)}function di(t,n){var i=null;if(t.g==n){we(t),Ze(t),t.g=null;var o=2}else if(ze(t.h,n))i=n.G,Jn(t.h,n),o=1;else return;if(t.I!=0){if(n.o)if(o==1){i=n.u?n.u.length:0,n=Date.now()-n.F;var m=t.D;o=Fe(),V(o,new Vn(o,i)),ye(t)}else pi(t);else if(m=n.m,m==3||m==0&&n.X>0||!(o==1&&or(t,n)||o==2&&Qe(t)))switch(i&&i.length>0&&(n=t.h,n.i=n.i.concat(i)),m){case 1:dt(t,5);break;case 4:dt(t,10);break;case 3:dt(t,6);break;default:dt(t,2)}}}function mi(t,n){let i=t.Qa+Math.floor(Math.random()*t.Za);return t.isActive()||(i*=2),i*n}function dt(t,n){if(t.j.info("Error code "+n),n==2){var i=A(t.bb,t),o=t.Ua;const m=!o;o=new ot(o||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||Gt(o,"https"),pe(o),m?tr(o.toString(),i):er(o.toString(),i)}else F(2);t.I=0,t.l&&t.l.pa(n),yi(t),ui(t)}s.bb=function(t){t?(this.j.info("Successfully pinged google.com"),F(2)):(this.j.info("Failed to ping google.com"),F(1))};function yi(t){if(t.I=0,t.ja=[],t.l){const n=Wn(t.h);(n.length!=0||t.i.length!=0)&&(z(t.ja,n),z(t.ja,t.i),t.h.i.length=0,Pt(t.i),t.i.length=0),t.l.oa()}}function wi(t,n,i){var o=i instanceof ot?Y(i):new ot(i);if(o.g!="")n&&(o.g=n+"."+o.g),Ht(o,o.u);else{var m=y.location;o=m.protocol,n=n?n+"."+m.hostname:m.hostname,m=+m.port;const _=new ot(null);o&&Gt(_,o),n&&(_.g=n),m&&Ht(_,m),i&&(_.h=i),o=_}return i=t.G,n=t.wa,i&&n&&D(o,i,n),D(o,"VER",t.ka),Qt(t,o),o}function _i(t,n,i){if(n&&!t.L)throw Error("Can't create secondary domain capable XhrIo object.");return n=t.Aa&&!t.ma?new N(new We({ab:i})):new N(t.ma),n.Fa(t.L),n}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function vi(){}s=vi.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function J(t,n){x.call(this),this.g=new li(n),this.l=t,this.h=n&&n.messageUrlParams||null,t=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(t?t["X-WebChannel-Content-Type"]=n.messageContentType:t={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.sa&&(t?t["X-WebChannel-Client-Profile"]=n.sa:t={"X-WebChannel-Client-Profile":n.sa}),this.g.U=t,(t=n&&n.Qb)&&!l(t)&&(this.g.u=t),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!l(n)&&(this.g.G=n,t=this.h,t!==null&&n in t&&(t=this.h,n in t&&delete t[n])),this.j=new Ot(this)}b(J,x),J.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},J.prototype.close=function(){Ye(this.g)},J.prototype.o=function(t){var n=this.g;if(typeof t=="string"){var i={};i.__data__=t,t=i}else this.v&&(i={},i.__data__=Me(t),t=i);n.i.push(new zs(n.Ya++,t)),n.I==3&&ye(n)},J.prototype.N=function(){this.g.l=null,delete this.j,Ye(this.g),delete this.g,J.Z.N.call(this)};function Ti(t){xe.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var n=t.__sm__;if(n){t:{for(const i in n){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,n=n!==null&&t in n?n[t]:void 0),this.data=n}else this.data=t}b(Ti,xe);function Ii(){Ve.call(this),this.status=1}b(Ii,Ve);function Ot(t){this.g=t}b(Ot,vi),Ot.prototype.ra=function(){V(this.g,"a")},Ot.prototype.qa=function(t){V(this.g,new Ti(t))},Ot.prototype.pa=function(t){V(this.g,new Ii)},Ot.prototype.oa=function(){V(this.g,"b")},J.prototype.send=J.prototype.o,J.prototype.open=J.prototype.m,J.prototype.close=J.prototype.close,Ue.NO_ERROR=0,Ue.TIMEOUT=8,Ue.HTTP_ERROR=6,Bs.COMPLETE="complete",xs.EventType=Vt,Vt.OPEN="a",Vt.CLOSE="b",Vt.ERROR="c",Vt.MESSAGE="d",x.prototype.listen=x.prototype.J,N.prototype.listenOnce=N.prototype.K,N.prototype.getLastError=N.prototype.Ha,N.prototype.getLastErrorCode=N.prototype.ya,N.prototype.getStatus=N.prototype.ca,N.prototype.getResponseJson=N.prototype.La,N.prototype.getResponseText=N.prototype.la,N.prototype.send=N.prototype.ea,N.prototype.setWithCredentials=N.prototype.Fa}).apply(typeof ve<"u"?ve:typeof self<"u"?self:typeof window<"u"?window:{});class U{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}U.UNAUTHENTICATED=new U(null),U.GOOGLE_CREDENTIALS=new U("google-credentials-uid"),U.FIRST_PARTY=new U("first-party-uid"),U.MOCK_USER=new U("mock-user");let oe="12.9.0";function Ho(s){oe=s}const Mt=new Yi("@firebase/firestore");function X(s,...e){if(Mt.logLevel<=cn.DEBUG){const r=e.map(_n);Mt.debug(`Firestore (${oe}): ${s}`,...r)}}function _s(s,...e){if(Mt.logLevel<=cn.ERROR){const r=e.map(_n);Mt.error(`Firestore (${oe}): ${s}`,...r)}}function zo(s,...e){if(Mt.logLevel<=cn.WARN){const r=e.map(_n);Mt.warn(`Firestore (${oe}): ${s}`,...r)}}function _n(s){if(typeof s=="string")return s;try{return(function(r){return JSON.stringify(r)})(s)}catch{return s}}function se(s,e,r){let h="Unexpected state";typeof e=="string"?h=e:r=e,vs(s,h,r)}function vs(s,e,r){let h=`FIRESTORE (${oe}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(r!==void 0)try{h+=" CONTEXT: "+JSON.stringify(r)}catch{h+=" CONTEXT: "+r}throw _s(h),new Error(h)}function Zt(s,e,r,h){let c="Unexpected state";typeof r=="string"?c=r:h=r,s||vs(e,c,h)}const P={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class R extends un{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class te{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}class Ts{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ko{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(U.UNAUTHENTICATED)))}shutdown(){}}class Jo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class Wo{constructor(e){this.t=e,this.currentUser=U.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Zt(this.o===void 0,42304);let h=this.i;const c=I=>this.i!==h?(h=this.i,r(I)):Promise.resolve();let d=new te;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new te,e.enqueueRetryable((()=>c(this.currentUser)))};const y=()=>{const I=d;e.enqueueRetryable((async()=>{await I.promise,await c(this.currentUser)}))},v=I=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit((I=>v(I))),setTimeout((()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new te)}}),0),y()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((h=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):h?(Zt(typeof h.accessToken=="string",31837,{l:h}),new Ts(h.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new U(e)}}class Xo{constructor(e,r,h){this.P=e,this.T=r,this.I=h,this.type="FirstParty",this.user=U.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Yo{constructor(e,r,h){this.P=e,this.T=r,this.I=h}getToken(){return Promise.resolve(new Xo(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(U.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qo{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Zt(this.o===void 0,3512);const h=d=>{d.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.m;return this.m=d.token,X("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?r(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>h(d)))};const c=d=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>c(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?c(d):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Oi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Zt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Oi(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zo(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let h=0;h<s;h++)r[h]=Math.floor(256*Math.random());return r}class th{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let h="";for(;h.length<20;){const c=Zo(40);for(let d=0;d<c.length;++d)h.length<20&&c[d]<r&&(h+=e.charAt(c[d]%62))}return h}}function ct(s,e){return s<e?-1:s>e?1:0}function eh(s,e){const r=Math.min(s.length,e.length);for(let h=0;h<r;h++){const c=s.charAt(h),d=e.charAt(h);if(c!==d)return rn(c)===rn(d)?ct(c,d):rn(c)?1:-1}return ct(s.length,e.length)}const nh=55296,ih=57343;function rn(s){const e=s.charCodeAt(0);return e>=nh&&e<=ih}const Li="__name__";class Z{constructor(e,r,h){r===void 0?r=0:r>e.length&&se(637,{offset:r,range:e.length}),h===void 0?h=e.length-r:h>e.length-r&&se(1746,{length:h,range:e.length-r}),this.segments=e,this.offset=r,this.len=h}get length(){return this.len}isEqual(e){return Z.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Z?e.forEach((h=>{r.push(h)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,h=this.limit();r<h;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const h=Math.min(e.length,r.length);for(let c=0;c<h;c++){const d=Z.compareSegments(e.get(c),r.get(c));if(d!==0)return d}return ct(e.length,r.length)}static compareSegments(e,r){const h=Z.isNumericId(e),c=Z.isNumericId(r);return h&&!c?-1:!h&&c?1:h&&c?Z.extractNumericId(e).compare(Z.extractNumericId(r)):eh(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wn.fromString(e.substring(4,e.length-2))}}class W extends Z{construct(e,r,h){return new W(e,r,h)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const h of e){if(h.indexOf("//")>=0)throw new R(P.INVALID_ARGUMENT,`Invalid segment (${h}). Paths must not contain // in them.`);r.push(...h.split("/").filter((c=>c.length>0)))}return new W(r)}static emptyPath(){return new W([])}}const sh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Z{construct(e,r,h){return new yt(e,r,h)}static isValidIdentifier(e){return sh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Li}static keyField(){return new yt([Li])}static fromServerFormat(e){const r=[];let h="",c=0;const d=()=>{if(h.length===0)throw new R(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(h),h=""};let y=!1;for(;c<e.length;){const v=e[c];if(v==="\\"){if(c+1===e.length)throw new R(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[c+1];if(I!=="\\"&&I!=="."&&I!=="`")throw new R(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);h+=I,c+=2}else v==="`"?(y=!y,c++):v!=="."||y?(h+=v,c++):(d(),c++)}if(d(),y)throw new R(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(r)}static emptyPath(){return new yt([])}}class _t{constructor(e){this.path=e}static fromPath(e){return new _t(W.fromString(e))}static fromName(e){return new _t(W.fromString(e).popFirst(5))}static empty(){return new _t(W.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&W.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return W.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new W(e.slice()))}}function rh(s,e,r,h){if(e===!0&&h===!0)throw new R(P.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function oh(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function hh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(h){return h.constructor?h.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":se(12329,{type:typeof s})}function ah(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new R(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=hh(s);throw new R(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function O(s,e){const r={typeString:s};return e&&(r.value=e),r}function he(s,e){if(!oh(s))throw new R(P.INVALID_ARGUMENT,"JSON must be an object");let r;for(const h in e)if(e[h]){const c=e[h].typeString,d="value"in e[h]?{value:e[h].value}:void 0;if(!(h in s)){r=`JSON missing required field: '${h}'`;break}const y=s[h];if(c&&typeof y!==c){r=`JSON field '${h}' must be a ${c}.`;break}if(d!==void 0&&y!==d.value){r=`Expected '${h}' field to equal '${d.value}'`;break}}if(r)throw new R(P.INVALID_ARGUMENT,r);return!0}const ji=-62135596800,Mi=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),h=Math.floor((e-1e3*r)*Mi);return new tt(r,h)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new R(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new R(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<ji)throw new R(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mi}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(he(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ji;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:O("string",tt._jsonSchemaVersion),seconds:O("number"),nanoseconds:O("number")};function lh(s){return s.name==="IndexedDbTransactionError"}class uh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class St{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(c){try{return atob(c)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new uh("Invalid base64 string: "+d):d}})(e);return new St(r)}static fromUint8Array(e){const r=(function(c){let d="";for(let y=0;y<c.length;++y)d+=String.fromCharCode(c[y]);return d})(e);return new St(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const h=new Uint8Array(r.length);for(let c=0;c<r.length;c++)h[c]=r.charCodeAt(c);return h})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const an="(default)";class Se{constructor(e,r){this.projectId=e,this.database=r||an}static empty(){return new Se("","")}get isDefaultDatabase(){return this.database===an}isEqual(e){return e instanceof Se&&e.projectId===this.projectId&&e.database===this.database}}function ch(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new R(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Se(s.options.projectId,e)}class fh{constructor(e,r=null,h=[],c=[],d=null,y="F",v=null,I=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=h,this.filters=c,this.limit=d,this.limitType=y,this.startAt=v,this.endAt=I,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ph(s){return new fh(s)}var xi,S;(S=xi||(xi={}))[S.OK=0]="OK",S[S.CANCELLED=1]="CANCELLED",S[S.UNKNOWN=2]="UNKNOWN",S[S.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",S[S.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",S[S.NOT_FOUND=5]="NOT_FOUND",S[S.ALREADY_EXISTS=6]="ALREADY_EXISTS",S[S.PERMISSION_DENIED=7]="PERMISSION_DENIED",S[S.UNAUTHENTICATED=16]="UNAUTHENTICATED",S[S.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",S[S.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",S[S.ABORTED=10]="ABORTED",S[S.OUT_OF_RANGE=11]="OUT_OF_RANGE",S[S.UNIMPLEMENTED=12]="UNIMPLEMENTED",S[S.INTERNAL=13]="INTERNAL",S[S.UNAVAILABLE=14]="UNAVAILABLE",S[S.DATA_LOSS=15]="DATA_LOSS";new wn([4294967295,4294967295],0);const gh=41943040;const dh=1048576;function on(){return typeof document<"u"?document:null}class mh{constructor(e,r,h=1e3,c=1.5,d=6e4){this.Ci=e,this.timerId=r,this.R_=h,this.A_=c,this.V_=d,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),h=Math.max(0,Date.now()-this.f_),c=Math.max(0,r-h);c>0&&X("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${h} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}class vn{constructor(e,r,h,c,d){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=h,this.op=c,this.removalCallback=d,this.deferred=new te,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((y=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,h,c,d){const y=Date.now()+h,v=new vn(e,r,y,c,d);return v.start(h),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Vi,Fi;(Fi=Vi||(Vi={})).Ma="default",Fi.Cache="cache";function yh(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const wh="ComponentProvider",Ui=new Map;const Is="firestore.googleapis.com",qi=!0;class Bi{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new R(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Is,this.ssl=qi}else this.host=e.host,this.ssl=e.ssl??qi;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dh)throw new R(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yh(e.experimentalLongPollingOptions??{}),(function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new R(P.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new R(P.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new R(P.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(h,c){return h.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class As{constructor(e,r,h,c){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=h,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bi({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new R(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new R(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bi(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(h){if(!h)return new Ko;switch(h.type){case"firstParty":return new Yo(h.sessionIndex||"0",h.iamToken||null,h.authTokenFactory||null);case"provider":return h.client;default:throw new R(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const h=Ui.get(r);h&&(X(wh,"Removing Datastore"),Ui.delete(r),h.terminate())})(this),Promise.resolve()}}function _h(s,e,r,h={}){s=ah(s,As);const c=pr(e),d=s._getSettings(),y={...d,emulatorOptions:s._getEmulatorOptions()},v=`${e}:${r}`;c&&(gr(`https://${v}`),dr("Firestore",!0)),d.host!==Is&&d.host!==v&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const I={...d,host:v,ssl:c,emulatorOptions:h};if(!Xi(I,y)&&(s._setSettings(I),h.mockUserToken)){let A,C;if(typeof h.mockUserToken=="string")A=h.mockUserToken,C=U.MOCK_USER;else{A=mr(h.mockUserToken,s._app?.options.projectId);const b=h.mockUserToken.sub||h.mockUserToken.user_id;if(!b)throw new R(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new U(b)}s._authCredentials=new Jo(new Ts(A,C))}}class Tn{constructor(e,r,h){this.converter=r,this._query=h,this.type="query",this.firestore=e}withConverter(e){return new Tn(this.firestore,e,this._query)}}class et{constructor(e,r,h){this.converter=r,this._key=h,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new In(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,h){if(he(r,et._jsonSchema))return new et(e,h||null,new _t(W.fromString(r.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:O("string",et._jsonSchemaVersion),referencePath:O("string")};class In extends Tn{constructor(e,r,h){super(e,r,ph(h)),this._path=h,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new _t(e))}withConverter(e){return new In(this.firestore,e,this._path)}}const $i="AsyncQueue";class Gi{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mh(this,"async_queue_retry"),this._c=()=>{const h=on();h&&X($i,"Visibility state changed to "+h.visibilityState),this.M_.w_()},this.ac=e;const r=on();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=on();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new te;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!lh(e))throw e;X($i,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((h=>{throw this.nc=h,this.rc=!1,_s("INTERNAL UNHANDLED ERROR: ",Hi(h)),h})).then((h=>(this.rc=!1,h))))));return this.ac=r,r}enqueueAfterDelay(e,r,h){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const c=vn.createAndSchedule(this,e,r,h,(d=>this.hc(d)));return this.tc.push(c),c}uc(){this.nc&&se(47125,{Pc:Hi(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,h)=>r.targetTimeMs-h.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function Hi(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class vh extends As{constructor(e,r,h,c){super(e,r,h,c),this.type="firestore",this._queue=new Gi,this._persistenceKey=c?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gi(e),this._firestoreClient=void 0,await e}}}function Th(s,e){const r=typeof s=="object"?s:Wi(),h=typeof s=="string"?s:an,c=re(r,"firestore").getImmediate({identifier:h});if(!c._initialized){const d=fr("firestore");d&&_h(c,...d)}return c}class nt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nt(St.fromBase64String(e))}catch(r){throw new R(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new nt(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(he(e,nt._jsonSchema))return nt.fromBase64String(e.bytes)}}nt._jsonSchemaVersion="firestore/bytes/1.0",nt._jsonSchema={type:O("string",nt._jsonSchemaVersion),bytes:O("string")};class Es{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new R(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vt{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new R(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new R(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vt._jsonSchemaVersion}}static fromJSON(e){if(he(e,vt._jsonSchema))return new vt(e.latitude,e.longitude)}}vt._jsonSchemaVersion="firestore/geoPoint/1.0",vt._jsonSchema={type:O("string",vt._jsonSchemaVersion),latitude:O("number"),longitude:O("number")};class Tt{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(h,c){if(h.length!==c.length)return!1;for(let d=0;d<h.length;++d)if(h[d]!==c[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(he(e,Tt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new Tt(e.vectorValues);throw new R(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tt._jsonSchemaVersion="firestore/vectorValue/1.0",Tt._jsonSchema={type:O("string",Tt._jsonSchemaVersion),vectorValues:O("object")};function Ss(s,e,r){if((e=Pe(e))instanceof Es)return e._internalPath;if(typeof e=="string")return Ah(s,e);throw ln("Field path arguments must be of type string or ",s)}const Ih=new RegExp("[~\\*/\\[\\]]");function Ah(s,e,r){if(e.search(Ih)>=0)throw ln(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new Es(...e.split("."))._internalPath}catch{throw ln(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function ln(s,e,r,h,c){let d=`Function ${e}() called with invalid data`;d+=". ";let y="";return new R(P.INVALID_ARGUMENT,d+s+y)}const zi="@firebase/firestore",Ki="4.11.0";class Ps{constructor(e,r,h,c,d){this._firestore=e,this._userDataWriter=r,this._key=h,this._document=c,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Eh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const r=this._document.data.field(Ss("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Eh extends Ps{data(){return super.data()}}class Te{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jt extends Ps{constructor(e,r,h,c,d,y){super(e,r,h,c,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ie(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const h=this._document.data.field(Ss("DocumentSnapshot.get",e));if(h!==null)return this._userDataWriter.convertValue(h,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new R(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=jt._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}jt._jsonSchemaVersion="firestore/documentSnapshot/1.0",jt._jsonSchema={type:O("string",jt._jsonSchemaVersion),bundleSource:O("string","DocumentSnapshot"),bundleName:O("string"),bundle:O("string")};class Ie extends jt{data(e={}){return super.data(e)}}class ee{constructor(e,r,h,c){this._firestore=e,this._userDataWriter=r,this._snapshot=c,this.metadata=new Te(c.hasPendingWrites,c.fromCache),this.query=h}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((h=>{e.call(r,new Ie(this._firestore,this._userDataWriter,h.key,h,new Te(this._snapshot.mutatedKeys.has(h.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new R(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(c,d){if(c._snapshot.oldDocs.isEmpty()){let y=0;return c._snapshot.docChanges.map((v=>{const I=new Ie(c._firestore,c._userDataWriter,v.doc.key,v.doc,new Te(c._snapshot.mutatedKeys.has(v.doc.key),c._snapshot.fromCache),c.query.converter);return v.doc,{type:"added",doc:I,oldIndex:-1,newIndex:y++}}))}{let y=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((v=>d||v.type!==3)).map((v=>{const I=new Ie(c._firestore,c._userDataWriter,v.doc.key,v.doc,new Te(c._snapshot.mutatedKeys.has(v.doc.key),c._snapshot.fromCache),c.query.converter);let A=-1,C=-1;return v.type!==0&&(A=y.indexOf(v.doc.key),y=y.delete(v.doc.key)),v.type!==1&&(y=y.add(v.doc),C=y.indexOf(v.doc.key)),{type:Sh(v.type),doc:I,oldIndex:A,newIndex:C}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new R(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ee._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=th.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],h=[],c=[];return this.docs.forEach((d=>{d._document!==null&&(r.push(d._document),h.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),c.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Sh(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:s})}}ee._jsonSchemaVersion="firestore/querySnapshot/1.0",ee._jsonSchema={type:O("string",ee._jsonSchemaVersion),bundleSource:O("string","QuerySnapshot"),bundleName:O("string"),bundle:O("string")};(function(e,r=!0){Ho(wr),ne(new ie("firestore",((h,{instanceIdentifier:c,options:d})=>{const y=h.getProvider("app").getImmediate(),v=new vh(new Wo(h.getProvider("auth-internal")),new Qo(y,h.getProvider("app-check-internal")),ch(y,c),y);return d={useFetchStreams:r,...d},v._setSettings(d),v}),"PUBLIC").setMultipleInstances(!0)),It(zi,Ki,e),It(zi,Ki,"esm2020")})();const Ph={apiKey:"AIzaSyA1XoWOiFCeoc5M0iO13EA3b26qhMyPdhw",authDomain:"task-manager-app-krk.firebaseapp.com",projectId:"task-manager-app-krk",storageBucket:"task-manager-app-krk.firebasestorage.app",messagingSenderId:"913306252590",appId:"1:913306252590:web:9153b4f33a0476a691b6bf",measurementId:"G-7HP7L0Z2LJ"},An=vr(Ph),bh=Uo(An),kh=Th(An),Ch=_r(An);export{bh as analytics,Ch as auth,kh as db};
